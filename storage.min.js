/**
 * storage.js
 * @author Stéphan Zych <info@monkeymonk.be>
 * @copyriht 2010-2011 Stéphan Zych <info@monkeymonk.be>
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */window.storage||(window.storage={});(function(e,t,n){"use strict";var r={type:"localStorage",enabled:function(){try{return r.type in e&&e[r.type]!==null}catch(t){return!1}},set:function(e,t){if(e===Object(e))for(var n in e)e.hasOwnProperty(n)&&this.type.setItem(n,e[n]);else this.type.setItem(e,t);return this},get:function(e,t){var n=r.all();if(Object.prototype.toString.call(e)==="[object Array]"){var i={};for(var s=0,o=e.length;s<o;s++){var u=e[s];i[u]=n[u]||t}return i}return n[e]||t},del:function(e){e=Object.prototype.toString.call(e)==="[object Array]"?e:[e];for(var t=0,n=e.length;t<n;t++)this.type.removeItem(e[t]);return this},clear:function(){this.type.clear();return this},all:function(){var e={};for(var t=0,n=this.type.length;t<n;t++){var r=this.type.key(t),i=this.type.getItem(r);e[r]=i}return e},change:function(t){var n=function(n){n||(n=e.event);t.call(r,r.all())};e.addEventListener?e.addEventListener("storage",n,!1):e.attachEvent("onstorage",n);return this}};e.storage=r})(window,document);